<div class="container">
  <div class="center-align">
    <%= link_to 'Back to Playlists', playlists_path, class: 'btn waves-effect waves-light' %>
  </div>

  <h1 class="center-align"><%= @playlist.name %></h1>

  <% if @playlist.cover_art.attached? %>
    <div class="center-align">
      <%= image_tag @playlist.cover_art, class: 'rounded img-fluid img-thumbnail' %>
    </div>
  <% else %>
    <div class="center-align">
      <%= image_tag 'default_cover_art.jpg', class: 'rounded img-fluid img-thumbnail' %>
    </div>
  <% end %>

  <h2 class="center-align">Tracks</h2>
  <table id="tracks-table" class="striped highlight responsive-table" data-controller="sortable" data-reorder-url="<%= reorder_tracks_playlist_path(@playlist) %>">
    <thead>
    <tr>
      <th>Order</th>
      <th>Name</th>
      <th>Artist(s)</th>
      <th>Key</th>
      <th>BPM</th>
      <th>Time</th>
      <th>Album</th>
      <th>Date Added</th>
      <th>Comments</th>
    </tr>
    </thead>
    <tbody>
    <% @playlist.playlists_tracks.order(:order).each do |playlists_track| %>
      <tr data-id="<%= playlists_track.track.id %>">
        <td class="order-cell"><%= playlists_track.order %></td>
        <td><%= playlists_track.track.name %></td>
        <td><%= playlists_track.track.artists.map(&:name).join(", ") %></td>
        <td><%= playlists_track.track.key %></td>
        <td><%= playlists_track.track.bpm %></td>
        <td><%= format_time(playlists_track.track.time) %></td>
        <td><%= playlists_track.track.album %></td>
        <td><%= playlists_track.track.date_added %></td>
        <td><%= playlists_track.track.comments %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
  <div class="center-align">
    <%= link_to 'Back to Playlists', playlists_path, class: 'btn waves-effect waves-light' %>
  </div>
</div>
